<div class="container-fluid">
  <nav aria-label="breadcrumb">
    <h3 class="fw-custom-semibold">Calificaciones</h3>
    <ol class="breadcrumb">
      <li class="breadcrumb-item">1RO</li>
      <li class="breadcrumb-item">A</li>
      <li class="breadcrumb-item active pe-2">Asignatura</li>
    </ol>
  </nav>
  <div class="card text-start border-0 rounded shadow">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-sm table-bordered table-hover">
          <thead class="align-middle text-center">
            <tr>
              <th rowspan="2">#</th>
              <th rowspan="2">Nombres</th>
              <ng-container *ngFor="let periodo of periodos;let i = index;">
                <th [attr.colspan]="getColspan()">{{(periodo.PRD_TIPO==='Normal')? periodo.PRD_NOM: 'Suspenso'}}
                </th>
              </ng-container>
            </tr>
            <tr>
              <ng-container *ngFor="let periodo of periodos">
                <ng-container *ngIf="(periodo.PRD_TIPO==='Normal')">
                  <ng-container *ngFor="let periodo of getRange(anio.NUM_PRCL);let i = index;">
                    <th>P {{i+1}}</th>
                  </ng-container>
                  <th>PROM</th>
                  <th>80%</th>
                  <ng-container *ngFor="let periodo of getRange(anio.NUM_EXAM);let i = index;">
                    <th>EX {{i+1}}</th>
                  </ng-container>
                  <th>20%</th>
                  <th>Total</th>
                  <th>EC</th>
                </ng-container>
                <ng-container *ngIf="(periodo.PRD_TIPO!=='Normal')">
                  <ng-container *ngFor="let periodo of getRange(anio.NUM_SUSP);let i = index;">
                    <th>EX {{i+1}}</th>
                  </ng-container>
                </ng-container>
              </ng-container>
            </tr>
          </thead>
          <tbody class="align-middle">
            <ng-container *ngFor="let item of estudiantes; index as i">
              <tr>
                <th scope="row" class="p-1">{{i+1}}</th>
                <td>
                  <p class="w-text-table">{{item.EST_CRS_NOM}}</p>
                </td>
                <ng-container *ngFor="let periodo of periodos">
                  <ng-container *ngIf="(periodo.PRD_TIPO==='Normal')">
                    <ng-container *ngFor="let periodo of getRange(anio.NUM_PRCL)">
                      <td>
                        <input class="form-control p-0 m-0 w-input-table" type="number">
                      </td>
                    </ng-container>
                    <td></td>
                    <td></td>
                    <ng-container *ngFor="let periodo of getRange(anio.NUM_EXAM)">
                      <td><input class="form-control p-0 m-0 w-input-table" type="number"
                          (input)="addCalificacion(item,$event)"></td>
                    </ng-container>
                    <td></td>
                    <td></td>
                    <td></td>
                  </ng-container>
                  <ng-container *ngIf="(periodo.PRD_TIPO!=='Normal')">
                    <ng-container *ngFor="let periodo of getRange(anio.NUM_SUSP)">
                      <td><input class="form-control p-0 m-0 w-input-table" type="number"
                          (input)="addCalificacion(item,$event)"></td>
                    </ng-container>
                  </ng-container>
                </ng-container>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>